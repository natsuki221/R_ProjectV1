demo()
install.packages("geojasonio")
install.packages("ggplot2")
#  注意 !  配合台北市網站開放資料的GeoJson 格式變更，請改用2_1_v01.R 或 2_1_v021.R
####### 繪製台北市界地圖解法一###################
library(geojsonio)  # 載入處理GeoJSON資料套件
####### 繪製台北市界地圖解法一###################
library(tibble)
geojson.sp <- geojson_read( # 將下載之縣市GeoJSON圖資讀入變數
x= 'https://raw.githubusercontent.com/g0v/twgeojson/master/json/twCounty2010.geo.json',
what = "sp" # 指定回傳Spatial class 之物件
)
print(geojson.sp@data[c('COUNTYSN','COUNTYNAME')]) # 列印縣市代碼對照
twn.map <- tidy( # 將sp物件轉換為data.frame物件
sp.taipei,  # 資料對象
region = "COUNTYSN" # 群(group)欄位的依據
)
g <- ggplot(  # 使用繪圖函式產生繪圖物件
data=twn.map,  # 符合data.frame格式的繪圖資料
mapping=aes(   # 指定data 的欄位
x = long,  # x軸為經度
y = lat    # y軸為緯度
)) +
labs(title='台北市縣界地圖(解方一)')+
geom_path(show.legend=FALSE)  # 繪出座標路徑線
geojson.sp <- geojson_read( # 將下載之縣市GeoJSON圖資讀入變數
x= 'https://raw.githubusercontent.com/g0v/twgeojson/master/json/twCounty2010.geo.json',
what = "sp" # 指定回傳Spatial class 之物件
)
####### 繪製台北市界地圖解法一###################
library(tibble)
library(geojsonio)  # 載入處理GeoJSON資料套件
geojson.sp <- geojson_read( # 將下載之縣市GeoJSON圖資讀入變數
x= 'https://raw.githubusercontent.com/g0v/twgeojson/master/json/twCounty2010.geo.json',
what = "sp" # 指定回傳Spatial class 之物件
)
print(geojson.sp@data[c('COUNTYSN','COUNTYNAME')]) # 列印縣市代碼對照
sp.taipei <- geojson.sp[  # 過濾geojson.sp(SpatialPolygonsDataFrame 物件) 的臺北市資料
geojson.sp@data$COUNTYNAME  %in% c('台北市'),
]
library(broom) # 載入轉換tibble(data.frame 的擴充物件)資料套件
twn.map <- tidy( # 將sp物件轉換為data.frame物件
sp.taipei,  # 資料對象
region = "COUNTYSN" # 群(group)欄位的依據
)
library(ggplot2) # 載入繪圖套件
g <- ggplot(  # 使用繪圖函式產生繪圖物件
data=twn.map,  # 符合data.frame格式的繪圖資料
mapping=aes(   # 指定data 的欄位
x = long,  # x軸為經度
y = lat    # y軸為緯度
)) +
labs(title='台北市縣界地圖(解方一)')+
geom_path(show.legend=FALSE)  # 繪出座標路徑線
print(g) # 印出台北縣市界地圖
####### 繪製台北市界地圖解法二###################
library(rgdal) # 載入rgdal套件讀取shp地圖資料
twn.shp <- rgdal::readOGR( # 回傳Spatial class 之物件
dsn='data/mapdata201911261001', # 目前工作目錄下(或路徑)圖資目錄
use_iconv = TRUE, # 依據encoding參數給予內碼轉碼
encoding='UTF-8'  # 轉為UTF-8 內碼
)
####### 繪製台北市界地圖解法一###################
library(tibble)
library(geojsonio)  # 載入處理GeoJSON資料套件
geojson.sp <- geojson_read( # 將下載之縣市GeoJSON圖資讀入變數
x= 'https://raw.githubusercontent.com/g0v/twgeojson/master/json/twCounty2010.geo.json',
what = "sp" # 指定回傳Spatial class 之物件
)
print(geojson.sp@data[c('COUNTYSN','COUNTYNAME')]) # 列印縣市代碼對照
sp.taipei <- geojson.sp[  # 過濾geojson.sp(SpatialPolygonsDataFrame 物件) 的臺北市資料
geojson.sp@data$COUNTYNAME  %in% c('台北市'),
]
library(broom) # 載入轉換tibble(data.frame 的擴充物件)資料套件
twn.map <- tidy( # 將sp物件轉換為data.frame物件
sp.taipei,  # 資料對象
region = "COUNTYSN" # 群(group)欄位的依據
)
library(ggplot2) # 載入繪圖套件
g <- ggplot(  # 使用繪圖函式產生繪圖物件
data=twn.map,  # 符合data.frame格式的繪圖資料
mapping=aes(   # 指定data 的欄位
x = long,  # x軸為經度
y = lat    # y軸為緯度
)) +
labs(title='台北市縣界地圖(解方一)')+
geom_path(show.legend=FALSE)  # 繪出座標路徑線
print(g) # 印出台北縣市界地圖
####### 繪製台北市界地圖解法二###################
library(rgdal) # 載入rgdal套件讀取shp地圖資料
twn.shp <- rgdal::readOGR( # 回傳Spatial class 之物件
dsn='data/mapdata201911261001', # 目前工作目錄下(或路徑)圖資目錄
use_iconv = TRUE, # 依據encoding參數給予內碼轉碼
encoding='UTF-8'  # 轉為UTF-8 內碼
)
source("~/Desktop/Work/R-Project/R/2_1_v01.R", echo=TRUE)
source("~/Desktop/Work/R-Project/R/2_1_v01.R", echo=TRUE)
library(tibble)
####### 繪製台北市界地圖解法一###################
library(tibble)
library(geojsonio)  # 載入處理GeoJSON資料套件
geojson.sp <- geojson_read( # 將下載之縣市GeoJSON圖資讀入變數
x= 'https://raw.githubusercontent.com/g0v/twgeojson/master/json/twCounty2010.geo.json',
what = "sp" # 指定回傳Spatial class 之物件
)
####### 繪製台北市界地圖解法一###################
library(tibble)
library(geojsonio)  # 載入處理GeoJSON資料套件
geojson.sp <- geojson_read( # 將下載之縣市GeoJSON圖資讀入變數
x= 'https://raw.githubusercontent.com/g0v/twgeojson/master/json/twCounty2010.geo.json',
what = "sp" # 指定回傳Spatial class 之物件
)
####### 繪製台北市界地圖解法一###################
library(tibble)
library(geojsonio)  # 載入處理GeoJSON資料套件
geojson.sp <- geojson_read( # 將下載之縣市GeoJSON圖資讀入變數
x= 'https://raw.githubusercontent.com/g0v/twgeojson/master/json/twCounty2010.geo.json',
what = "sp" # 指定回傳Spatial class 之物件
)
install.packages("dplyr")
library(tidyverse)
library("tidyverse")
install.packages("tidyverse")
library("tidyverse")
setwd('/Users/lintzujeng/Desktop/Work/R-Project/merge')
library("openxlsx")
odf <- read.xlsx('orange_market.xlsx')
View(odf)
weather <- read.csv('weather.csv')
weather <- read.csv('weather.csv', header = T)
weather <- read.csv('weather.csv', header = T)
View(weather)
weather$平均 <- NULL
weather['平均',] <- NULL
weather['平均',]
weather[6,]
weather[6,] <- NULL
weather[6,] <- NA
weather[6,] <- NULL
weather2 <- weather[-6]
View(weather2)
weather2 <- weather[-6,]
weather3 <- vector(weather2)
?vector
weather3 <- vector(weather2, mode = 'list')
weather3 <- vector(weather2, mode = 'any')
weather3 <- stack(weather2)
View(weather3)
odf$id <- c(1:length(odf))
length(odf)
length(odf$日期)
odf$id <- c(1:length(odf$日期))
weather3 <- as.vector(weather2, mode = 'any')
View(weather3)
weather3
weather3$X1[1]
weather3[1,1]
install.packages("reshape2")
library(reshape2)
library("reshape2")
weather.long <- melt(weather2, id.vars = "年.月")
View(weather.long)
order(weather.long)
weather.long.ordered <- order(weather.long)
weather.long.ordered <- data.frame(order(weather$年.月))
View(weather.long.ordered)
weather.long.ordered <- data.frame[order(weather$年.月),]
weather.long.ordered <- weather.long[order(weather$年.月),]
View(weather.long.ordered)
View(weather.long)
weather.long <- melt(weather2, id.vars = "年.月")
weather.long.ordered <- weather.long[order(weather$年.月),]
weather.long.ordered <- weather.long[order(年.月),]
weather.long.ordered <- weather.long[order('年.月'),]
weather.long <- melt(weather2, id.vars = "年.月")
weather.long.ordered <- weather.long[order('年.月'),]
View(weather.long.ordered)
weather.long.ordered <- weather.long[order('年.月', 'variable'),]
View(weather.long.ordered)
weather.long[order('年.月', 'variable'),]
weather.long[order(weather.long$年.月, weather.long$variable),]
View(weather.long.ordered)
weather.long.ordered <- weather.long[order(weather.long$年.月, weather.long$variable),]
View(weather.long.ordered)
weather.long.ordered$id <- c(1:length(weather.long.ordered$年.月))
?separate
df <- data.frame(x = c(NA, "x.y", "x.z", "y.z"))
View(df)
df %>% separate(x, c("A", "B"))
View(df)
separate(odf, col = 日期, sep = "年")
separate(odf, col = 日期, sep = "年", into = c("年", "月"))
odf.sep <- separate(odf, col = 日期, sep = "年", into = c("年", "月"))
